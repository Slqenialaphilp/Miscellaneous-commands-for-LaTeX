\ProvidesExplFile{mathutil.tex}{2025/09/14}{1.0a}{utility for math}

\sys_if_engine_luatex:TF 
{
	\NewDocumentCommand{\sfrac}{o m m}{{{#2} \Uskewed / \IfValueT{#1}{#1} {#3}}}
	\NewDocumentCommand{\vsfrac}{D(){large} o m m}{\text{\use:c{#1}\({{#3} \Uskewed / \IfValueT{#2}{#2} {#4}}\)}}
} {
	\IfPackageLoadedF{xfrac}{\usepackage{xfrac}}
	\NewDocumentCommand{\vsfrac}{D(){large} m m}{\text{\use:c{#1}\(\sfrac{#2}{#3}\)}}
}

\NewDocumentCommand{\quot}{>{\SplitArgument{1}{/}}m}{\quotient #1}
\NewDocumentCommand{\quotient}{m t/ m}{
	\mathchoice
		{\vsfrac(normalsize){#1}{#3}}
		{\vsfrac(large){#1}{#3}}
		{\vsfrac(normalsize){#1}{#3}}
		{\vsfrac(scriptsize){#1}{#3}}
}

\seq_new:N \__vvec_seq
\int_new:N \__vvec_cnt_int
\NewDocumentCommand{\vvec}{s m}{
	\bool_if:nTF {#1} {
		\left(#2\right)^T
	} {
		\seq_set_from_clist:Nn \__vvec_seq {#2}
		\exp_args:NNo \int_set_eq:NN \__vvec_cnt_int {\seq_count:N \__vvec_seq}
		\begin{pmatrix}
			\seq_map_indexed_inline:Nn \__vvec_seq {
				##2
				\int_compare:nNnF ##1 = \__vvec_cnt_int {\\}
			}
		\end{pmatrix}
	}
}